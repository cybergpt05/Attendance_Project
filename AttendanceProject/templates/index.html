<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Scanner</title>
</head>
<body>
    <h1>مسح كود QR</h1>
    <div id="qr-reader" style="width: 500px; height: 500px;"></div>
    <button id="start-scan">ابدأ المسح</button>

    <script>
        // إعداد الكاميرا لقراءة كود الـ QR
        function onScanSuccess(decodedText, decodedResult) {
            // سيتم تنفيذ هذه الوظيفة عند نجاح المسح
            alert("تم مسح الكود: " + decodedText);
            window.location.href = decodedText; // إعادة توجيه المستخدم للرابط الموجود في الكود
        }

        function onScanError(errorMessage) {
            // سيتم تنفيذ هذه الوظيفة عند حدوث خطأ في المسح
            console.error(errorMessage);
        }

        // البدء في مسح الكود عند الضغط على الزر
        document.getElementById("start-scan").addEventListener("click", function() {
            const qrCodeScanner = new Html5Qrcode("qr-reader");

            qrCodeScanner.start(
                { facingMode: "environment" }, // استخدام الكاميرا الخلفية
                {
                    fps: 10,    // عدد الإطارات في الثانية
                    qrbox: 250  // حجم مربع المسح
                },
                onScanSuccess,
                onScanError
            );
        });
    </script>
</body>
</html>
